<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#4F46E5" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192x192-A.png" type="image/png" />
  <title>PWA Template Responsif</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0A0E27">
    <meta name="description" content="Aplikasi Trading Crypto Modern">
    <title>Artacen - Crypto Exchange</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        :root {
            --bg-primary: #0A0E27;
            --bg-secondary: #131726;
            --bg-card: #1a1f37;
            --accent-color: #5B7FFF;
            --accent-secondary: #00D4FF;
            --accent-gradient: linear-gradient(135deg, #5B7FFF, #00D4FF);
            --text-gray: #8F9BB7;
            --success: #00E676;
            --danger: #FF3B69;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(180deg, var(--bg-primary) 0%, #0d1230 100%);
            font-family: 'Inter', sans-serif;
            padding-bottom: 80px;
            overflow-x: hidden;
            color: #fff;
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { background: var(--accent-color); border-radius: 10px; }
        .card-custom {
            background: linear-gradient(135deg, rgba(26, 31, 55, 0.8), rgba(19, 23, 38, 0.9));
            border: 1px solid rgba(91, 127, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        .card-custom:hover {
            border-color: rgba(91, 127, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(91, 127, 255, 0.15);
        }
        #auth-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at 20% 50%, rgba(91, 127, 255, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                        var(--bg-primary);
            padding: 20px;
            position: fixed;
            top: 0; left: 0; width: 100%; z-index: 2000;
        }
        .auth-card {
            background: rgba(19, 23, 38, 0.95);
            border: 1px solid rgba(91, 127, 255, 0.2);
            border-radius: 24px;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }
        .btn-gradient {
            background: var(--accent-gradient);
            border: none;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(91, 127, 255, 0.3);
        }
        .btn-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(91, 127, 255, 0.4);
        }
        .text-gradient {
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }
        .top-bar {
            background: rgba(19, 23, 38, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(91, 127, 255, 0.1);
        }
        .portfolio-card {
            background: var(--accent-gradient);
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 10px 40px rgba(91, 127, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        .portfolio-card::before {
            content: '';
            position: absolute;
            top: -50%; right: -50%;
            width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s infinite;
        }
        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }
        .quick-action {
            background: var(--bg-card);
            border: 1px solid rgba(91, 127, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .quick-action:hover {
            border-color: var(--accent-color);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(91, 127, 255, 0.2);
        }
        .quick-action i { font-size: 2rem; margin-bottom: 8px; display: block; }
        .bottom-nav {
            background: rgba(19, 23, 38, 0.98);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(91, 127, 255, 0.15);
            height: 75px;
            z-index: 1000;
            box-shadow: 0 -5px 30px rgba(0, 0, 0, 0.3);
        }
        .nav-link-custom {
            color: var(--text-gray);
            font-size: 0.7rem;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        .nav-link-custom.active {
            color: var(--accent-color);
            background: rgba(91, 127, 255, 0.1);
        }
        .nav-link-custom i { font-size: 1.5rem; }
        #tradingview-widget-container { height: 400px; width: 100%; border-radius: 16px; overflow: hidden; }
        .coin-item {
            background: var(--bg-card);
            border: 1px solid rgba(91, 127, 255, 0.1);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .coin-item:hover { border-color: var(--accent-color); transform: translateX(5px); }
        .coin-icon {
            width: 45px; height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            background: var(--accent-gradient);
            margin-right: 12px;
        }
        .trade-panel {
            background: var(--bg-card);
            border: 1px solid rgba(91, 127, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
        }
        .form-control, .form-select {
            background: rgba(19, 23, 38, 0.8) !important;
            border: 1px solid rgba(91, 127, 255, 0.2) !important;
            color: white !important;
            border-radius: 12px !important;
            padding: 12px 16px !important;
        }
        .form-control:focus, .form-select:focus {
            border-color: var(--accent-color) !important;
            box-shadow: 0 0 0 3px rgba(91, 127, 255, 0.1) !important;
        }
        .btn {
            border-radius: 12px;
            padding: 10px 20px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-success { background: var(--success); border: none; }
        .btn-danger { background: var(--danger); border: none; }
        .btn-outline-secondary {
            border-color: rgba(91, 127, 255, 0.3);
            color: var(--text-gray);
        }
        .btn-outline-secondary:hover, .btn-outline-secondary.active {
            background: var(--accent-color);
            border-color: var(--accent-color);
            color: white;
        }
        .badge { padding: 6px 12px; border-radius: 8px; font-weight: 600; }
        .modal-content {
            background: var(--bg-card) !important;
            border: 1px solid rgba(91, 127, 255, 0.2) !important;
            border-radius: 20px !important;
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: translateX(-50%) translateY(0); }
            to { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }
    </style>
</head>
<body>
    <div id="auth-screen" class="d-none">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6 col-lg-4">
                    <div class="auth-card p-4">
                        <div class="text-center mb-4">
                            <h2 class="text-gradient fw-bold mb-2">Artacen</h2>
                            <p class="text-muted">Masuk ke akun Anda</p>
                        </div>
                        <form id="auth-form">
                            <div class="mb-3">
                                <label for="email" class="form-label text-muted">Email</label>
                                <input type="email" class="form-control" id="email" placeholder="nama@email.com" required>
                            </div>
                            <div class="mb-4">
                                <label for="password" class="form-label text-muted">Password</label>
                                <input type="password" class="form-control" id="password" placeholder="Password" required>
                            </div>
                            <button type="submit" class="btn btn-gradient w-100 py-3 mb-3">
                                <i class="bi bi-box-arrow-in-right me-2"></i>Masuk
                            </button>
                        </form>
                        <div class="text-center">
                            <small class="text-muted">Demo: gunakan email dan password apa saja</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="main-app">
        <nav class="navbar fixed-top top-bar p-3">
            <div class="container-fluid d-flex justify-content-between align-items-center">
                <span class="fw-bold text-gradient fs-3">Artacen</span>
                <div class="d-flex gap-2">
                    <button class="btn btn-sm btn-dark rounded-circle"><i class="bi bi-bell"></i></button>
                </div>
            </div>
        </nav>

        <div class="container mt-5 pt-5">
            <div id="page-home" class="page-section">
                <div class="portfolio-card mb-4">
                    <small class="opacity-75 d-block mb-2">Total Portfolio</small>
                    <h2 class="fw-bold mb-1">$12,458.50</h2>
                    <div class="d-flex align-items-center gap-2 mb-3">
                        <span class="badge bg-white text-primary">+5.4%</span>
                        <small>+$645.30 Hari ini</small>
                    </div>
                    <div class="row g-2">
                        <div class="col-6">
                            <button class="btn btn-light w-100 fw-bold" data-bs-toggle="modal" data-bs-target="#depositModal">
                                <i class="bi bi-arrow-down-circle me-2"></i>Deposit
                            </button>
                        </div>
                        <div class="col-6">
                            <button class="btn btn-outline-light w-100 fw-bold" data-bs-toggle="modal" data-bs-target="#withdrawModal">
                                <i class="bi bi-arrow-up-circle me-2"></i>Withdraw
                            </button>
                        </div>
                    </div>
                </div>
                <div class="row g-3 mb-4">
                    <div class="col-3"><div class="quick-action" onclick="navTo('market')"><i class="bi bi-graph-up text-info"></i><small class="d-block">Market</small></div></div>
                    <div class="col-3"><div class="quick-action" onclick="navTo('trade')"><i class="bi bi-arrow-left-right text-warning"></i><small class="d-block">Convert</small></div></div>
                    <div class="col-3"><div class="quick-action"><i class="bi bi-piggy-bank text-success"></i><small class="d-block">Earn</small></div></div>
                    <div class="col-3"><div class="quick-action"><i class="bi bi-grid text-danger"></i><small class="d-block">Lainnya</small></div></div>
                </div>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="fw-bold mb-0">ðŸ”¥ Trending Market</h5>
                    <a href="#" class="text-info text-decoration-none" onclick="navTo('market'); return false;">Lihat Semua</a>
                </div>
                <div id="trending-list"></div>
            </div>

            <div id="page-market" class="page-section d-none">
                <h4 class="mb-3 fw-bold">Pasar Crypto</h4>
                <div id="market-list"></div>
            </div>

            <div id="page-trade" class="page-section d-none">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div>
                        <h4 class="fw-bold mb-0">BTC/USDT</h4>
                        <small class="text-muted">Bitcoin</small>
                    </div>
                    <div class="text-end">
                        <h5 class="fw-bold mb-0" id="current-price">$45,225.00</h5>
                        <small class="text-success">+2.45%</small>
                    </div>
                </div>
                <div class="card-custom p-2 mb-3">
                    <div id="tradingview-widget-container"></div>
                </div>
                <div class="trade-panel">
                    <div class="btn-group w-100 mb-3">
                        <button class="btn btn-success" id="buy-tab" onclick="switchTradeTab('buy')">Beli</button>
                        <button class="btn btn-outline-secondary" id="sell-tab" onclick="switchTradeTab('sell')">Jual</button>
                    </div>
                    <div id="trade-form">
                        <div class="mb-3">
                            <label class="small text-muted mb-2">Harga (USDT)</label>
                            <input type="number" class="form-control" value="45225.00">
                        </div>
                        <div class="mb-3">
                            <label class="small text-muted mb-2">Jumlah (BTC)</label>
                            <input type="number" class="form-control" placeholder="0.00">
                        </div>
                        <div class="d-flex gap-2 mb-3">
                            <button class="btn btn-sm btn-outline-secondary flex-fill">25%</button>
                            <button class="btn btn-sm btn-outline-secondary flex-fill">50%</button>
                            <button class="btn btn-sm btn-outline-secondary flex-fill">75%</button>
                            <button class="btn btn-sm btn-outline-secondary flex-fill">100%</button>
                        </div>
                        <button class="btn btn-success w-100 py-3" id="trade-btn">
                            <i class="bi bi-arrow-up-circle me-2"></i>Beli BTC
                        </button>
                    </div>
                </div>
            </div>

            <div id="page-wallet" class="page-section d-none">
                <div class="text-center mb-4">
                    <small class="text-muted d-block mb-2">Total Estimasi Aset</small>
                    <h2 class="fw-bold">$12,458.50</h2>
                    <small class="text-success">â‰ˆ Rp 193.450.000</small>
                </div>
                <div class="card-custom p-4 mb-3">
                    <h6 class="fw-bold mb-3">Aset Saya</h6>
                    <div id="wallet-list"></div>
                </div>
            </div>

            <div id="page-profile" class="page-section d-none">
                <div class="card-custom p-4 mb-3">
                    <div class="text-center">
                        <div class="coin-icon mx-auto mb-3" style="width: 80px; height: 80px; font-size: 2rem;">U</div>
                        <h5 class="mb-1">User</h5>
                        <small class="text-muted">user@artacen.com</small>
                    </div>
                </div>
                <button class="btn btn-danger w-100 py-3" onclick="logout()">
                    <i class="bi bi-box-arrow-right me-2"></i>Keluar
                </button>
            </div>
        </div>
    </div>

    <nav id="bottom-nav" class="navbar fixed-bottom bottom-nav">
        <div class="container-fluid justify-content-around">
            <a href="#" class="nav-link-custom active text-decoration-none" onclick="navTo('home', this); return false;"><i class="bi bi-house-door-fill"></i><span>Home</span></a>
            <a href="#" class="nav-link-custom text-decoration-none" onclick="navTo('market', this); return false;"><i class="bi bi-bar-chart-fill"></i><span>Market</span></a>
            <a href="#" class="nav-link-custom text-decoration-none" onclick="navTo('trade', this); return false;"><i class="bi bi-arrow-left-right"></i><span>Trade</span></a>
            <a href="#" class="nav-link-custom text-decoration-none" onclick="navTo('wallet', this); return false;"><i class="bi bi-wallet2"></i><span>Wallet</span></a>
            <a href="#" class="nav-link-custom text-decoration-none" onclick="navTo('profile', this); return false;"><i class="bi bi-person-fill"></i><span>Profil</span></a>
        </div>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let cryptoData = [
            { symbol: 'BTC', name: 'Bitcoin', price: 45230.50, change: 2.4, holdings: 0.2, color: '#F7931A' },
            { symbol: 'ETH', name: 'Ethereum', price: 2340.10, change: -1.2, holdings: 1.5, color: '#627EEA' },
            { symbol: 'BNB', name: 'Binance Coin', price: 312.45, change: 0.8, holdings: 5, color: '#F3BA2F' },
            { symbol: 'SOL', name: 'Solana', price: 98.50, change: 5.6, holdings: 0, color: '#14F195' },
            { symbol: 'XRP', name: 'Ripple', price: 0.55, change: -0.5, holdings: 1000, color: '#23292F' },
            { symbol: 'ADA', name: 'Cardano', price: 0.48, change: 3.2, holdings: 0, color: '#0033AD' },
            { symbol: 'DOGE', name: 'Dogecoin', price: 0.08, change: -2.1, holdings: 0, color: '#C2A633' },
            { symbol: 'MATIC', name: 'Polygon', price: 0.92, change: 4.1, holdings: 0, color: '#8247E5' },
            { symbol: 'DOT', name: 'Polkadot', price: 7.23, change: 1.8, holdings: 0, color: '#E6007A' },
            { symbol: 'AVAX', name: 'Avalanche', price: 38.45, change: -0.9, holdings: 0, color: '#E84142' }
        ];
        let currentUser = null;
        let selectedCoin = null;
        let priceUpdateInterval;

        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            const tradeBtn = document.getElementById('trade-btn');
            if(tradeBtn) {
                tradeBtn.addEventListener('click', function() {
                    const isBuy = this.classList.contains('btn-success');
                    const coinSymbol = selectedCoin ? selectedCoin.symbol : 'BTC';
                    showNotification(`Order ${coinSymbol} berhasil ${isBuy ? 'dibeli' : 'dijual'}!`, 'success');
                });
            }
        });

        function checkAuth() {
            const savedUser = localStorage.getItem('artacen_user');
            if(savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainApp();
            } else {
                showAuthScreen();
            }
        }

        function showAuthScreen() {
            document.getElementById('auth-screen').classList.remove('d-none');
            document.getElementById('main-app').classList.add('d-none');
            document.getElementById('bottom-nav').classList.add('d-none');
            stopPriceUpdates();
        }

        function showMainApp() {
            document.getElementById('auth-screen').classList.add('d-none');
            document.getElementById('main-app').classList.remove('d-none');
            document.getElementById('bottom-nav').classList.remove('d-none');
            initApp();
            startPriceUpdates();
        }

        function logout() {
            if(confirm("Yakin ingin keluar?")) {
                localStorage.removeItem('artacen_user');
                currentUser = null;
                showAuthScreen();
            }
        }

        document.getElementById('auth-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            if(email && password) {
                currentUser = { email, name: email.split('@')[0] };
                localStorage.setItem('artacen_user', JSON.stringify(currentUser));
                showMainApp();
            }
        });

        function navTo(pageId, element = null) {
            document.querySelectorAll('.page-section').forEach(el => el.classList.add('d-none'));
            document.getElementById('page-' + pageId).classList.remove('d-none');
            if(element) {
                document.querySelectorAll('.nav-link-custom').forEach(el => el.classList.remove('active'));
                element.classList.add('active');
            }
            if(pageId === 'trade') setTimeout(initChart, 100);
        }

        function initApp() {
            renderMarketList();
            renderTrending();
            renderWallet();
            if(currentUser) {
                document.querySelector('#page-profile h5').textContent = currentUser.name;
                document.querySelector('#page-profile .text-muted').textContent = currentUser.email;
            }
        }

        function startPriceUpdates() {
            if(priceUpdateInterval) clearInterval(priceUpdateInterval);
            priceUpdateInterval = setInterval(() => {
                cryptoData.forEach(coin => {
                    const change = (Math.random() - 0.5) * 0.5;
                    coin.price *= (1 + change / 100);
                    coin.change += change;
                });
                const currentPage = document.querySelector('.page-section:not(.d-none)');
                if(currentPage?.id === 'page-market') renderMarketList();
                if(currentPage?.id === 'page-home') renderTrending();
            }, 5000);
        }

        function stopPriceUpdates() {
            if(priceUpdateInterval) clearInterval(priceUpdateInterval);
        }

        function renderMarketList() {
            const container = document.getElementById('market-list');
            if(!container) return;
            container.innerHTML = cryptoData.map(coin => `
                <div class="coin-item" onclick="selectCoin('${coin.symbol}')">
                    <div class="d-flex align-items-center">
                        <div class="coin-icon" style="background: ${coin.color};">${coin.symbol.charAt(0)}</div>
                        <div>
                            <div class="fw-bold">${coin.symbol}/USDT</div>
                            <small class="text-muted">${coin.name}</small>
                        </div>
                    </div>
                    <div class="text-end">
                        <div class="fw-bold mb-1">$${coin.price.toFixed(2)}</div>
                        <span class="badge ${coin.change >= 0 ? 'bg-success' : 'bg-danger'}">${coin.change >= 0 ? '+' : ''}${coin.change.toFixed(2)}%</span>
                    </div>
                </div>
            `).join('');
        }

        function renderTrending() {
            const container = document.getElementById('trending-list');
            if(!container) return;
            const trending = [...cryptoData].sort((a,b) => Math.abs(b.change) - Math.abs(a.change)).slice(0,5);
            container.innerHTML = trending.map(coin => `
                <div class="coin-item" onclick="selectCoin('${coin.symbol}')">
                    <div class="d-flex align-items-center">
                        <div class="coin-icon" style="background: ${coin.color};">${coin.symbol.charAt(0)}</div>
                        <div>
                            <div class="fw-bold">${coin.symbol}/USDT</div>
                            <small class="text-muted">${coin.name}</small>
                        </div>
                    </div>
                    <div class="text-end">
                        <div class="fw-bold mb-1">$${coin.price.toFixed(2)}</div>
                        <span class="badge ${coin.change >= 0 ? 'bg-success' : 'bg-danger'}">${coin.change >= 0 ? '+' : ''}${coin.change.toFixed(2)}%</span>
                    </div>
                </div>
            `).join('');
        }

        function renderWallet() {
            const container = document.getElementById('wallet-list');
            if(!container) return;
            const assets = cryptoData.filter(c => c.holdings > 0);
            if(assets.length === 0) {
                container.innerHTML = '<div class="text-center text-muted py-4">Tidak ada aset</div>';
                return;
            }
            container.innerHTML = assets.map(coin => `
                <div class="d-flex justify-content-between align-items-center border-bottom border-secondary py-3">
                    <div class="d-flex align-items-center">
                        <div class="coin-icon me-3" style="background: ${coin.color}; width: 40px; height: 40px;">${coin.symbol.charAt(0)}</div>
                        <div>
                            <div class="fw-bold">${coin.holdings} ${coin.symbol}</div>
                            <small class="text-muted">$${coin.price.toFixed(2)}</small>
                        </div>
                    </div>
                    <div class="text-end">
                        <div class="fw-bold">$${(coin.price * coin.holdings).toFixed(2)}</div>
                        <small class="${coin.change >= 0 ? 'text-success' : 'text-danger'}">${coin.change >= 0 ? '+' : ''}${coin.change.toFixed(2)}%</small>
                    </div>
                </div>
            `).join('');
        }

        function selectCoin(symbol) {
            selectedCoin = cryptoData.find(c => c.symbol === symbol);
            if(selectedCoin) {
                navTo('trade');
                updateTradeView();
            }
        }

        function updateTradeView() {
            if(!selectedCoin) return;
            document.querySelector('#page-trade h4').textContent = `${selectedCoin.symbol}/USDT`;
            document.querySelector('#page-trade h4 + small').textContent = selectedCoin.name;
            document.querySelector('#current-price').textContent = `${selectedCoin.price.toFixed(2)}`;
            const changeEl = document.querySelector('#current-price + small');
            changeEl.textContent = `${selectedCoin.change >= 0 ? '+' : ''}${selectedCoin.change.toFixed(2)}%`;
            changeEl.className = selectedCoin.change >= 0 ? 'text-success' : 'text-danger';
            const tradeBtn = document.getElementById('trade-btn');
            const isBuy = tradeBtn.classList.contains('btn-success');
            tradeBtn.innerHTML = `<i class="bi bi-arrow-${isBuy ? 'up' : 'down'}-circle me-2"></i>${isBuy ? 'Beli' : 'Jual'} ${selectedCoin.symbol}`;
            initChart();
        }

        function initChart() {
            const container = document.getElementById('tradingview-widget-container');
            if(!container) return;
            container.innerHTML = '';
            const symbol = selectedCoin ? `BINANCE:${selectedCoin.symbol}USDT` : 'BINANCE:BTCUSDT';
            try {
                new TradingView.widget({
                    "width": "100%",
                    "height": 400,
                    "symbol": symbol,
                    "interval": "15",
                    "timezone": "Etc/UTC",
                    "theme": "dark",
                    "style": "1",
                    "locale": "id",
                    "toolbar_bg": "#0A0E27",
                    "enable_publishing": false,
                    "backgroundColor": "#0A0E27",
                    "gridColor": "rgba(91, 127, 255, 0.1)",
                    "allow_symbol_change": true,
                    "container_id": "tradingview-widget-container"
                });
            } catch(e) {
                container.innerHTML = '<div class="text-center text-muted py-5">Chart loading...</div>';
            }
        }

        function switchTradeTab(type) {
            const buyTab = document.getElementById('buy-tab');
            const sellTab = document.getElementById('sell-tab');
            const tradeBtn = document.getElementById('trade-btn');
            const coinSymbol = selectedCoin ? selectedCoin.symbol : 'BTC';
            if(type === 'buy') {
                buyTab.classList.remove('btn-outline-secondary');
                buyTab.classList.add('btn-success');
                sellTab.classList.remove('btn-danger');
                sellTab.classList.add('btn-outline-secondary');
                tradeBtn.classList.remove('btn-danger');
                tradeBtn.classList.add('btn-success');
                tradeBtn.innerHTML = `<i class="bi bi-arrow-up-circle me-2"></i>Beli ${coinSymbol}`;
            } else {
                sellTab.classList.remove('btn-outline-secondary');
                sellTab.classList.add('btn-danger');
                buyTab.classList.remove('btn-success');
                buyTab.classList.add('btn-outline-secondary');
                tradeBtn.classList.remove('btn-success');
                tradeBtn.classList.add('btn-danger');
                tradeBtn.innerHTML = `<i class="bi bi-arrow-down-circle me-2"></i>Jual ${coinSymbol}`;
            }
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type} position-fixed top-0 start-50 translate-middle-x mt-5 shadow-lg`;
            notification.style.zIndex = '9999';
            notification.style.minWidth = '300px';
            notification.innerHTML = `<i class="bi bi-check-circle-fill me-2"></i>${message}`;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.5s ease-out';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }
    </script>
</body>
</html>